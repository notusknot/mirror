import{S as R,i as V,s as q,k as j,a as $,l as y,m as b,h as m,c as A,n as v,b as C,L as _,X as P,G as w,Y as F,a0 as N,P as L,K as U,R as S,o as X,$ as z,q as x,r as D,u as T,a1 as G,C as K,x as O,y as Y,z as B,f as H,t as Q,A as W}from"../../../chunks/index-0689c3c5.js";import{c as Z,p as k}from"../../../chunks/pocketbase-91d466f8.js";function J(o,s,t){const e=o.slice();return e[7]=s[t],e}function I(o,s){let t,e,d=M(s[7].created)+"",u,c,n,f,h=s[7].text+"",i,p;return{key:o,first:null,c(){t=j("div"),e=j("span"),u=x(d),c=x(":"),n=$(),f=j("span"),i=x(h),p=$(),this.h()},l(a){t=y(a,"DIV",{class:!0});var l=b(t);e=y(l,"SPAN",{class:!0});var r=b(e);u=D(r,d),c=D(r,":"),r.forEach(m),n=A(l),f=y(l,"SPAN",{class:!0});var g=b(f);i=D(g,h),g.forEach(m),p=A(l),l.forEach(m),this.h()},h(){v(e,"class","entry-date svelte-1ejt09a"),v(f,"class","entry-text"),v(t,"class","entry svelte-1ejt09a"),this.first=t},m(a,l){C(a,t,l),_(t,e),_(e,u),_(e,c),_(t,n),_(t,f),_(f,i),_(t,p)},p(a,l){s=a,l&2&&d!==(d=M(s[7].created)+"")&&T(u,d),l&2&&h!==(h=s[7].text+"")&&T(i,h)},d(a){a&&m(t)}}}function ee(o){let s,t,e=[],d=new Map,u,c,n,f,h,i=o[1];const p=a=>a[7].id;for(let a=0;a<i.length;a+=1){let l=J(o,i,a),r=p(l);d.set(r,e[a]=I(r,l))}return{c(){s=j("div"),t=j("div");for(let a=0;a<e.length;a+=1)e[a].c();u=$(),c=j("form"),n=j("textarea"),this.h()},l(a){s=y(a,"DIV",{class:!0});var l=b(s);t=y(l,"DIV",{class:!0});var r=b(t);for(let E=0;E<e.length;E+=1)e[E].l(r);r.forEach(m),u=A(l),c=y(l,"FORM",{class:!0});var g=b(c);n=y(g,"TEXTAREA",{placeholder:!0,class:!0}),b(n).forEach(m),g.forEach(m),l.forEach(m),this.h()},h(){v(t,"class","content svelte-1ejt09a"),v(n,"placeholder","add journal"),v(n,"class","svelte-1ejt09a"),v(c,"class","svelte-1ejt09a"),v(s,"class","journals svelte-1ejt09a")},m(a,l){C(a,s,l),_(s,t);for(let r=0;r<e.length;r+=1)e[r].m(t,null);_(s,u),_(s,c),_(c,n),P(n,o[0]),f||(h=[w(n,"input",o[4]),w(n,"blur",o[3]),w(c,"submit",F(o[3]))],f=!0)},p(a,[l]){l&2&&(i=a[1],e=N(e,l,p,1,a,i,d,t,G,I,null,J)),l&1&&P(n,a[0])},i:L,o:L,d(a){a&&m(s);for(let l=0;l<e.length;l+=1)e[l].d();f=!1,U(h)}}}function M(o){return new Date(o).toLocaleString("default",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function te(o,s,t){let e,d;S(o,Z,i=>t(6,e=i));let u,c=K([]);S(o,c,i=>t(1,d=i));let n;X(async()=>{const[i,p]=await Promise.all([k.collection("journals").getList(1,50,{sort:"-created"}),k.collection("journals").subscribe("*",async({action:a,record:l})=>{if(a==="create"&&c.update(r=>[...r,l]),a==="delete"&&c.update(r=>r.filter(g=>g.id!==l.id)),a==="update"){const r=await k.collection("journals").getList(1,50,{sort:"-created"});c.set(r.items)}})]);c.set(i.items),n=p}),z(()=>{n==null||n()});async function f(){if(!u)return;const i={text:u,checked:!1,user:e?e.id:""};await k.collection("journals").create(i),t(0,u="")}function h(){u=this.value,t(0,u)}return[u,d,c,f,h]}class ae extends R{constructor(s){super(),V(this,s,te,ee,q,{})}}function se(o){let s,t;return s=new ae({}),{c(){O(s.$$.fragment)},l(e){Y(s.$$.fragment,e)},m(e,d){B(s,e,d),t=!0},p:L,i(e){t||(H(s.$$.fragment,e),t=!0)},o(e){Q(s.$$.fragment,e),t=!1},d(e){W(s,e)}}}class re extends R{constructor(s){super(),V(this,s,null,se,q,{})}}export{re as default};
