import{S as x,i as ee,s as te,e as Q,b as I,P as G,h,R as se,W as ae,k as m,q as L,a as k,l as b,m as y,r as E,c as g,n as u,L as o,X as R,G as j,Y as le,K as re,u as ne}from"./index-0689c3c5.js";import{c as oe,p as F}from"./pocketbase-91d466f8.js";import{R as ce}from"./control-e7f5239e.js";function ie(r,t){return new ce(r,t)}new TextEncoder;function ue(r){let t,e,a,s,l,n,P,v,O,C,d,A,N,S,c,B,M,T,q,K,U,W,D,V,f=r[2]&&Z(r),p=r[3]&&$();return{c(){t=m("div"),e=m("form"),a=m("label"),s=L("Username"),l=k(),n=m("input"),P=k(),v=m("label"),O=L("Password"),C=k(),d=m("input"),A=k(),f&&f.c(),N=k(),p&&p.c(),S=k(),c=m("button"),B=L("Login"),M=k(),T=m("span"),q=L("If you don't have an account"),K=k(),U=m("button"),W=L("Create account"),this.h()},l(_){t=b(_,"DIV",{class:!0});var w=y(t);e=b(w,"FORM",{class:!0});var i=y(e);a=b(i,"LABEL",{for:!0});var X=y(a);s=E(X,"Username"),X.forEach(h),l=g(i),n=b(i,"INPUT",{id:!0,type:!0,class:!0}),P=g(i),v=b(i,"LABEL",{for:!0});var Y=y(v);O=E(Y,"Password"),Y.forEach(h),C=g(i),d=b(i,"INPUT",{id:!0,placeholder:!0,type:!0,class:!0}),A=g(i),f&&f.l(i),N=g(i),p&&p.l(i),S=g(i),c=b(i,"BUTTON",{class:!0});var z=y(c);B=E(z,"Login"),z.forEach(h),M=g(i),T=b(i,"SPAN",{class:!0});var H=y(T);q=E(H,"If you don't have an account"),H.forEach(h),K=g(i),U=b(i,"BUTTON",{class:!0});var J=y(U);W=E(J,"Create account"),J.forEach(h),i.forEach(h),w.forEach(h),this.h()},h(){u(a,"for","username"),u(n,"id","username"),u(n,"type","text"),u(n,"class","svelte-s69jy6"),u(v,"for","password"),u(d,"id","password"),u(d,"placeholder","at least 8 characters"),u(d,"type","password"),u(d,"class","svelte-s69jy6"),u(c,"class","svelte-s69jy6"),u(T,"class","no-account svelte-s69jy6"),u(U,"class","svelte-s69jy6"),u(e,"class","svelte-s69jy6"),u(t,"class","svelte-s69jy6")},m(_,w){I(_,t,w),o(t,e),o(e,a),o(a,s),o(e,l),o(e,n),R(n,r[0]),o(e,P),o(e,v),o(v,O),o(e,C),o(e,d),R(d,r[1]),o(e,A),f&&f.m(e,null),o(e,N),p&&p.m(e,null),o(e,S),o(e,c),o(c,B),o(e,M),o(e,T),o(T,q),o(e,K),o(e,U),o(U,W),D||(V=[j(n,"input",r[10]),j(d,"input",r[11]),j(d,"keyup",r[8]),j(c,"click",r[5]),j(U,"click",r[6]),j(e,"submit",le(r[9]))],D=!0)},p(_,w){w&1&&n.value!==_[0]&&R(n,_[0]),w&2&&d.value!==_[1]&&R(d,_[1]),_[2]?f?f.p(_,w):(f=Z(_),f.c(),f.m(e,N)):f&&(f.d(1),f=null),_[3]?p||(p=$(),p.c(),p.m(e,S)):p&&(p.d(1),p=null)},d(_){_&&h(t),f&&f.d(),p&&p.d(),D=!1,re(V)}}}function fe(r){let t,e,a,s;return{c(){t=m("button"),e=L("Sign Out"),this.h()},l(l){t=b(l,"BUTTON",{class:!0});var n=y(t);e=E(n,"Sign Out"),n.forEach(h),this.h()},h(){u(t,"class","svelte-s69jy6")},m(l,n){I(l,t,n),o(t,e),a||(s=j(t,"click",r[7]),a=!0)},p:G,d(l){l&&h(t),a=!1,s()}}}function Z(r){let t,e;return{c(){t=m("span"),e=L(r[2]),this.h()},l(a){t=b(a,"SPAN",{class:!0});var s=y(t);e=E(s,r[2]),s.forEach(h),this.h()},h(){u(t,"class","error svelte-s69jy6")},m(a,s){I(a,t,s),o(t,e)},p(a,s){s&4&&ne(e,a[2])},d(a){a&&h(t)}}}function $(r){let t,e;return{c(){t=m("span"),e=L("Caps lock is on"),this.h()},l(a){t=b(a,"SPAN",{class:!0});var s=y(t);e=E(s,"Caps lock is on"),s.forEach(h),this.h()},h(){u(t,"class","error svelte-s69jy6")},m(a,s){I(a,t,s),o(t,e)},d(a){a&&h(t)}}}function pe(r){let t;function e(l,n){return l[4]?fe:ue}let a=e(r),s=a(r);return{c(){s.c(),t=Q()},l(l){s.l(l),t=Q()},m(l,n){s.m(l,n),I(l,t,n)},p(l,[n]){a===(a=e(l))&&s?s.p(l,n):(s.d(1),s=a(l),s&&(s.c(),s.m(t.parentNode,t)))},i:G,o:G,d(l){s.d(l),l&&h(t)}}}function he(r,t,e){let a;se(r,oe,c=>e(4,a=c));let s,l,n="",P=!1;async function v(){try{await F.collection("users").authWithPassword(s,l),e(0,s=""),e(1,l="")}catch(c){throw e(2,n=c.message),c}}async function O(){try{if(l.length<8)throw new Error(`Password must be at least ${8} characters long.`);const B={username:s,password:l,passwordConfirm:l};await F.collection("users").create(B),await v()}catch(c){throw e(2,n=c.message),c}}function C(){throw F.authStore.clear(),ie(303,"/")}function d(c){e(3,P=c.getModifierState("CapsLock"))}function A(c){ae.call(this,r,c)}function N(){s=this.value,e(0,s)}function S(){l=this.value,e(1,l)}return[s,l,n,P,a,v,O,C,d,A,N,S]}class be extends x{constructor(t){super(),ee(this,t,he,pe,te,{})}}export{be as L};
